block main_variables

doctype html
html
    head
        script(type="text/javascript", src="cordova.js")
        
        if google_tag_manager != null
            //- GTM User
            script.
                (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','#{google_tag_manager}');


        title= appDisplayName
        meta(name='viewport', content='width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover')
        //- meta(http-equiv="Content-Security-Policy" content="default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; media-src * filesystem: *; img-src * filesystem: * data:; frame-src * filesystem:;")
        meta(http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; media-src * filesystem: *; img-src * filesystem: * data:; frame-src * filesystem: blob: *;")
        //- meta(http-equiv="Content-Security-Policy", content="upgrade-insecure-requests; default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; media-src * filesystem: *; img-src * filesystem: * data:; frame-src * filesystem: blob: myapp-localhost: *;")
    
        meta(name="theme-color", content=themeColor)
        meta(charset="UTF-8")
        meta(http-equiv="Content-Type", content="text/html; charset=UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="msapplication-tap-highlight", content="no")
        meta(name="description", content=appDisplayName)
        meta(name="keywords", content=keywords)
        meta(name="mobile-web-app-capable", content="yes")

        meta(name="apple-mobile-web-app-capable", content="yes")
        meta(name="apple-touch-fullscreen", content="yes")
        meta(name="apple-mobile-web-app-title", content=appDisplayName)
        meta(name="apple-mobile-web-app-capable", content="yes")
        meta(name="apple-mobile-web-app-status-bar-style", content="black-translucent")

        link(rel="icon", href="images/favicon-32x32.png" sizes="32x32")

        //-PWA iOS Home Icon
        link(rel="apple-touch-icon-precomposed", href="images/apple-touch-icon-152x152.png")
        link(rel="apple-touch-icon" sizes="180x180" href="images/apple-home-icon-180x180.png")

        //-PWA iOS Splash
        link(rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-1136x640.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)", href="images/apple-icon-splash-2436x1125.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-1792x828.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-828x1792.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-1334x750.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)", href="images/apple-icon-splash-1242x2688.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)", href="images/apple-icon-splash-2208x1242.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)", href="images/apple-icon-splash-1125x2436.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)", href="images/apple-icon-splash-1242x2208.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-2732x2048.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)", href="images/apple-icon-splash-2688x1242.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-2224x1668.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-750x1334.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-2048x2732.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-2388x1668.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-1668x2224.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-640x1136.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-1668x2388.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", href="images/apple-icon-splash-2048x1536.png")
        link(rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", href="images/apple-icon-splash-1536x2048.png")

        //- For PWA
        //- link(rel="manifest", href="manifest.json")
        //- script.
        //-     if(window.location.href.indexOf("file://") == -1) //Only remote server registration
        //-     {
        //-         if ('serviceWorker' in navigator) 
        //-         {
        //-             navigator.serviceWorker.register('sw.js')
        //-                 .then(reg => console.info('registered sw', reg))
        //-                 .catch(err => console.error('error registering sw', err));
        //-         }
        //-     }

        //- For iPhone
        meta(name="msapplication-TileColor", content=themeColor)
        meta(name="msapplication-TileImage", content="images/mstile-144x144.png")


        //- Material Design Icons
        link(rel='stylesheet', href="css/vendors/materialdesignicons/materialdesignicons.min.css" media="all" type="text/css")

        //- Materialize
        link(type="text/css", href="css/vendors/materialize/materialize.min.css", rel="stylesheet")

        //- Material Icons
        //- link(rel='stylesheet', href='https://fonts.googleapis.com/icon?family=Material+Icons')
        link(type="text/css", href="css/vendors/googlematerialicons/materialicons.css", rel="stylesheet")

        //- Font Awesome
        link(rel='stylesheet', href="css/vendors/fontawesome-6.1.1/css/all.min.css", type='text/css')

        //- Sweet Alert CSS Part
        link(rel='stylesheet', href="js/vendors/sweetalert/sweetalert.css", type='text/css')
        //- link(rel='stylesheet', href="css/sweetalertoverride.css", type='text/css')

        //- Animate
        link(rel='stylesheet', href="css/vendors/animate/animate.min.css", type='text/css')

        //- Theme Switch
        link(rel='stylesheet', href="css/i_theme_switch.css", type='text/css')

        //- App
        link(rel="stylesheet", href="css/app.css", type="text/css")

        //- Contact List
        link(rel="stylesheet", href="css/contact-list.css", type="text/css")

        //- Chat
        link(rel="stylesheet", href="css/chat.css", type="text/css")



        if defaultTheme != null
            if defaultTheme == "light"
                link#colorLink(rel="stylesheet", href="css/colors/light.css", type="text/css")
            else
                link#colorLink(rel="stylesheet", href="css/colors/dark.css", type="text/css")

            script.
                const SYS_INITIAL_THEME="#{defaultTheme}"
        else
            link#colorLink(rel="stylesheet", href="css/colors/dark.css", type="text/css")
            script.
                const SYS_INITIAL_THEME="dark"

        //- App parameters
        script(type="text/javascript", src="js/parameters.js")

        //- JQuery
        script(type="text/javascript", src="js/vendors/jquery/jquery-3.6.0.min.js")


    body(onload="onDeviceLoad()", class="body-app " + (platform=="ios" ? "body-ios" : (platform=="android" ? "body-android" : "")) )
        if google_tag_manager != null
            //- GTM User
            input#trackingGTM(type="hidden", value=google_tag_manager)
            noscript
                iframe(src="https://www.googletagmanager.com/ns.html?id=" + google_tag_manager, height="0", width="0", style="display:none;visibility:hidden")

        if platform=="browser"
            script(type="text/javascript", src="js/static.js")

        div(class="wrap-app")
            block content

        //- Phone Codes JSON
        script(type="text/javascript", src="js/phonecodes.js")

        //- JQuery
        script(type="text/javascript", src="js/vendors/jquery/jquery-3.6.0.min.js")

        //- Font Awesome JS Part
        script(type="text/javascript", src="css/vendors/fontawesome-6.1.1/js/fontawesome.min.js")

        //- Sweet Alert
        script(type="text/javascript", src="js/vendors/sweetalert/sweetalert.min.js")

        //- Libphonenumber-js
        //- script(type="text/javascript", src="js/vendors/libphonenumber-js/libphonenumber-js.min.js")
        script(type="text/javascript", src="js/vendors/libphonenumber-js/libphonenumber-max.js")

        //- QRious
        script(type="text/javascript", src="js/vendors/qrious/qrious.min.js")

        //- Siri Wave
        script(type="text/javascript", src="js/vendors/siriwave/siriwave.umd.min.js")

        //- Move to top
        script(type="text/javascript", src="js/vendors/movetotop/moveToTop.js")

        //- OpenPGP - https://github.com/openpgpjs/openpgpjs - https://openpgpjs.org
        //- script(type="text/javascript", src="js/vendors/openpgp/openpgp.min.js")

        //- jquerymask
        script(type="text/javascript", src="js/vendors/jquerymask/jquery.mask.min.js")

        //- jsuites - https://jsuites.net/v4/
        //- script(type="text/javascript", src="js/vendors/jsuites/jsuites.js")

        //- LZ-String
        //- script(type="text/javascript", src="js/vendors/lzstring/lz-string.js")
        script(type="text/javascript", src="js/vendors/lzstring/lzutf8.min.js")
        
        //- Zip JS
        script(type="text/javascript", src="js/vendors/zip.js/zip.min.js")

        //- ZenFS
        script(type="text/javascript", src="js/vendors/zenfs/browser.min.js")

        //- Pako (compress and decompress lib)
        script(type="text/javascript", src="js/vendors/pako/pako.min.js")

        //- Rolldate
        //- script(type="text/javascript", src="js/vendors/rolldate/rolldate.js")

        //-JSEncrypt
        script(type="text/javascript", src="js/vendors/jsencrypt/jsencrypt.min.js")

        //- Materialize
        script(type="text/javascript", src="js/vendors/materialize/materialize.min.js")
        script(type="text/javascript", src="js/vendors/materializedatetimepicker/materializedatetimepicker.js")

        //-Module Storage
        script(src='js/modstorage.js')       

        //- if platform=="browser"
            script(src='js/vendors/sql.js/sqljs-wasm/sql-wasm.js')
        script(src='js/database.js')

        //- App
        script(type="text/javascript", src="js/constants.js")
        script(type="text/javascript", src="js/app.js")